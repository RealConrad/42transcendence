<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @keyframes spin-clockwise {
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes spin-anti-clockwise {
      to {
        transform: rotate(-360deg);
      }
    }

    body {
      display: grid;
      place-items: center;
      min-height: 100vh;
      font-family: monospace, monospace;
      overflow: hidden;
      background: black;
      color: white;
    }

    .text-ring {
      position: relative;
      font-weight: bold;
      font-family: monospace;
      text-transform: uppercase;
      animation: spin-clockwise 30s linear infinite;
      transform-origin: 50% 50%; /* Ensures rotation around the center */
    }

    .inner-ring {
      animation: spin-anti-clockwise 40s linear infinite;
    }

    .text-ring [style*=--index] {
      --inner-angle: calc((360 / var(--total)) * 1deg);
      --radius: calc((var(--character-width, 1) / sin(var(--inner-angle))) * -1ch);
      font-size: calc(var(--font-size, 2) * 1rem);
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: 50% 50%;
      transform:
        translate(-50%, -50%)
        rotate(calc(var(--inner-angle) * var(--index)))
        translateY(var(--radius));
    }
    .circle-container {
        width: 500px;
        height: 500px;
        display: grid;
        align-content: center;
    }
    .name-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: absolute; /* Ensure it's within the .circle-container */
        top: 50%; /* Center vertically */
        left: 50%; /* Center horizontally */
        transform: translate(-50%, -50%); /* Correct offset from top and left */
        text-align: center;
    }
    .highlight {
        color: #FFCB13;
    }
         {#text-shadow: 0 0 10px yellow;#}
  </style>
</head>
<body>
    <div class="circle-container">
        <span class="text-ring outer-ring"></span>
        <span class="text-ring inner-ring"></span>
        <div class="name-container">
            <div data-contributions="Backend,Authentication,Frontend,Game,API,AI">cwenz</div>
            <div data-contributions="Frontend,Game,API">kglebows</div>
            <div data-contributions="Backend,Authentication,2FA,API">hkumbhan</div>
            <div data-contributions="Frontend,">vivi</div>
            <div data-contributions="NGINX,">petru</div>
        </div>
    </div>
  <script>
    const outerRing = document.querySelector('.outer-ring');
    const innerRing = document.querySelector('.inner-ring');

    const outerRingOptions = {
        text: ' Backend • Authentication • Frontend • Game •',
        size: 2,
        spacing: 1.5,
    };

    const innerRingOptions = {
        text: ' UI/UX        NGINX         2FA         AI         API        ',
        size: 1.4,
        spacing: 1,
    };

    /**
     * NOTE: This is a messy function, but I dont have time to think of a cleaner solution :(
     */
    const createTextRings = (htmlElement, options) => {
        htmlElement.innerHTML = '';
        const chars = options.text.split(''); // Split text into characters
        htmlElement.style.setProperty('--total', chars.length);
        htmlElement.style.setProperty('--character-width', options.spacing);
        htmlElement.style.setProperty('--font-size', options.size);

        const hiddenChars = document.createElement('span');
        hiddenChars.setAttribute('aria-hidden', 'true');

        let word = ''; // capture chars for the current word
        let currentSpans = []; // to store all the spans for the current word

        chars.forEach((char, index) => {
            if (char === ' ' || char === '•') {
                // since we have a full word --> assign it to all previous spans
                currentSpans.forEach(span => {
                    span.dataset.contributions = word.trim().toLowerCase();
                });
                // reset it for the next word
                word = '';
                currentSpans = [];
            }

            if (char !== ' ' && char !== '•') {
                word += char;
            }
            const span = document.createElement('span');
            span.style.setProperty('--index', index);
            span.textContent = char;
            hiddenChars.appendChild(span);

            // Track spans for the current word
            if (char !== ' ' && char !== '•') {
                currentSpans.push(span);
            }
        });

        // assign `data-word` to the last word (if any)
        currentSpans.forEach(span => {
            span.dataset.contributions = word.trim().toLowerCase();
        });
        htmlElement.appendChild(hiddenChars);
    };


    // Generate both rings
    createTextRings(outerRing, outerRingOptions);
    createTextRings(innerRing, innerRingOptions);

    const names = document.querySelector(".name-container");
    names.addEventListener('mouseover', (e) => {
        if (e.target !== names) {
            e.target.classList.add("highlight");
        }
        const userContributions = e.target.dataset.contributions?.split(",") || [];
        // get all span elements that are children of '.text-ring'
        const spans = document.querySelectorAll(".text-ring span");

        //console.log(userContributions);
        userContributions.forEach((contribution) => {
            spans.forEach((span) => {
                if (span.dataset.contributions === contribution.toLowerCase()) {
                   span.classList.add("highlight");
                }
            });
        });
    });
    names.addEventListener('mouseout', (e) => {
        const spans = document.querySelectorAll(".text-ring span");
        e.target.classList.remove("highlight");
        spans.forEach((span) => span.classList.remove("highlight"));
    });

  </script>
</body>
</html>
